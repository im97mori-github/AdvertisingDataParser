// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        google()
        mavenCentral()

    }
    dependencies {
        classpath 'com.android.tools.build:gradle:4.2.1'
        classpath 'digital.wup:android-maven-publish:3.6.3'
        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        maven { url "https://github.com/im97mori-github/maven/raw/master" }
//        maven { url System.getenv('MAVEN_REPOSITORY_URL') }
        google()
        mavenCentral()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

ext.globalCompileSdkVersion = 30
ext.globalBuildToolsVersion = '30.0.3'
ext.globalMinSdkVersion = 18
ext.globalPeripheralMinSdkVersion = 21
ext.globalTargetSdkVersion = 30

ext.groupId = 'org.im97mori'
ext.artifactId = 'artifactId'
ext.versionCode = 'versionCode'
ext.versionName = 'versionName'
ext.uploadVersionName = 'uploadVersionName'
ext.baseArtifactId = 'baseArtifactId'
ext.baseVersionName = 'baseVersionName'
ext.baseModule = 'baseModule'

ext.coreConstantsErrorCodeAndroid = [
        artifactId         : 'ble-core-constants-errorcode-android'
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
        , baseModule       : "${groupId}:ble-core-constants-errorcode:0.4.0"
]

ext.coreConstantsAndroid = [
        artifactId         : 'ble-core-constants-android'
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
]

ext.coreUtilsAndroid = [
        artifactId         : 'ble-core-utils-android'
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
        , baseModule       : "${groupId}:ble-core-utils:0.4.0"
]

ext.coreAndroid = [
        artifactId         : 'ble-core-android'
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
]

ext.advertisingAndroid = [
        artifactId         : 'ble-advertising-android'
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
        , baseModule       : "${groupId}:ble-advertising:0.4.0"
]

apply from: 'descriptor.gradle'
apply from: 'characteristic.gradle'

ext.handler = [
        artifactId         : 'ble-handler'
        , versionCode      : 200
        , versionName      : '0.2.0'
        , uploadVersionName: '0.2.0'
]

ext.central = [
        artifactId         : 'ble-central'
        , versionCode      : 700
        , versionName      : '0.7.0'
        , uploadVersionName: '0.7.0'
]

ext.peripheral = [
        artifactId         : 'ble-peripheral'
        , versionCode      : 300
        , versionName      : '0.3.0'
        , uploadVersionName: '0.3.0'
]

apply from: 'service.gradle'
apply from: 'profile.gradle'

ext.test = [
        artifactId         : "ble-test"
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
]

ext.testPeripheral = [
        artifactId         : "ble-test-peripheral"
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
]

ext.testCentral = [
        artifactId         : "ble-test-central"
        , versionCode      : 400
        , versionName      : '0.4.0'
        , uploadVersionName: '0.4.0'
]

ext.apiCoreConstantsAppearance = "${groupId}:ble-core-constants-appearance:0.4.0"
ext.apiCoreConstantsCharacteristic = "${groupId}:ble-core-constants-characteristic:0.4.0"
ext.apiCoreConstantsCompany = "${groupId}:ble-core-constants-company:0.4.0"
ext.apiCoreConstantsDataType = "${groupId}:ble-core-constants-datatype:0.4.0"
ext.apiCoreConstantsDescriptor = "${groupId}:ble-core-constants-descriptor:0.4.0"
ext.apiCoreConstantsScheme = "${groupId}:ble-core-constants-scheme:0.4.0"
ext.apiCoreConstantsService = "${groupId}:ble-core-constants-service:0.4.0"
ext.apiCoreConstantsUnit = "${groupId}:ble-core-constants-unit:0.4.0"
ext.apiCoreConstantsAndroid = "${groupId}:${coreConstantsAndroid.artifactId}:${coreConstantsAndroid.versionName}"

ext.apiCoreUtilsAndroid = "${groupId}:${coreUtilsAndroid.artifactId}:${coreUtilsAndroid.versionName}"

ext.apiCoreAndroid = "${groupId}:${coreAndroid.artifactId}:${coreAndroid.versionName}"

ext.apiAdvertisingAndroid = "${groupId}:${advertisingAndroid.artifactId}:${advertisingAndroid.versionName}"

ext.apiCharacteristicCore = "${groupId}:ble-characteristic-core:0.4.0"
ext.apiCharacteristicCoreAndroid = "${groupId}:${characteristicCoreAndroid.artifactId}:${characteristicCoreAndroid.versionName}"

ext.apiCoreConstantsDescriptor = "${groupId}:ble-core-constants-descriptor:0.4.0"
ext.apiCoreConstantsCharacteristic = "${groupId}:ble-core-constants-characteristic:0.4.0"

ext.apiHandler = "${groupId}:${handler.artifactId}:${handler.versionName}"
ext.apiTest = "${groupId}:${test.artifactId}:${test.versionName}"
ext.apiTestPeripheral = "${groupId}:${testPeripheral.artifactId}:${testPeripheral.versionName}"
ext.apiTestCentral = "${groupId}:${testCentral.artifactId}:${testCentral.versionName}"
ext.androidxAnnotation = 'androidx.annotation:annotation:1.2.0'
ext.androidxTestRunner = 'androidx.test:runner:1.3.0'
ext.androidxTestCore = 'androidx.test:core:1.3.0'
ext.stackLog = 'org.im97mori:stacklog:0.0.2'
ext.gson = 'com.google.code.gson:gson:2.8.6'